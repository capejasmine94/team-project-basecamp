<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="/public/css/common.css">
    <link rel="stylesheet" href="/public/css/insta/instaStyle.css">
    <title>campstagram</title>

    <!-- <script src="/public/js/util.js"></script> -->
    
    <script>
        const urlParams = new URL(window.location.href).searchParams;
        const articleId = urlParams.get("article_id");

        // myId =  session아이디 _ 글로벌 변수 
        let myId = null;
        let myInstaId = null;

        function setSessionId(){
            const url = "/api/user/getSessionUserId";
            fetch(url)
            .then(response => response.json())
            .then((response) => { // 응답 받은 시점

                myId = response.data.userId;
                reloadHeart();
                console.log("Session ID :", myId); // 콘솔에 찍힐 세션 id
            });
        }

        function setMyInstaId(){
            const url = "/api/insta/getMyInstaId";

            fetch(url)
            .then(response => response.json())
            .then((response) => {
                myInstaId = response.data.myInstaId

                console.log("sessionGetInstaId ID :", myInstaId); // 콘솔에 찍힐 세션 id
            })
            ;
        }

        function like(){
            const url = "/api/insta/like?article_id=" + articleId;
            if(myId == null){
                if(confirm("로그인 후 이용부탁드립니다. 로그인 페이지로 이동하시겠습니까?")){
                    location.href = "/insta/instaLoginPage";
                }
                return;
            }

            fetch(url)
                .then(response => response.json())
                .then(response => {
                    reloadHeart();
                })
                ;
        }

        function reloadHeart() {
            if(myId == null){
                return;
            }
            
            const url = "/api/insta/isLiked?article_id=" + articleId;
            fetch(url)
                .then(response => response.json())
                .then(response => {

                    const heart = document.getElementById("heart");

                    if(response.data.isLiked == true){ // 내가 이 article에 좋아요를 누른거
                        heart.classList.remove("bi-heart"); // 'fa-regular fa-heart' => 공백 제거를 위해 쉼표로 나눠서 작성
                        heart.classList.add("bi-heart-fill");

                        heart.onclick = unLike;
                    }else{ // 좋아요 안 누른거
                        heart.classList.remove("bi-heart-fill");
                        heart.classList.add("bi-heart");

                        heart.onclick = like;
                    }
                })
                ;

        }

        function unLike(){

            if(myId == null){
                if(confirm("로그인 후 이용부탁드립니다. 로그인 페이지로 이동하시겠습니까?")){
                    location.href = "/insta/instaLoginPage";
                }
                return;
            }

            const url = "/api/insta/unLike?article_id=" + articleId;

            fetch(url)
            .then(response => response.json())
            .then(response => {
                reloadHeart();
            })
            ;
        }



        // 오프캔버스를 열어서 표시하는 함수
        function cShow() {
            // 오프캔버스를 열기
            const c = bootstrap.Offcanvas.getOrCreateInstance("#offcanvasComment");
            c.show();
        }

        // aHide 함수는 오프캔버스를 닫는 역할을 합니다.
        function cHide() {
            // 오프캔버스를 닫기
            const c = bootstrap.Offcanvas.getOrCreateInstance("#offcanvasComment");
            c.hide();
        }




        window.addEventListener("DOMContentLoaded", () => {
            // 페이지 로드 후 사실상 시작 지점
            setSessionId();
            setMyInstaId();

        });

    </script>

    <style>
        /* 오프캠버스 css */
        .offcanvas-bottom {
            border-radius: 10px 10px 0 0; /* 위쪽 모서리 둥글게 */
            /* 위쪽 모서리 두 개는 20px로 둥글게 만들고, 아래쪽 모서리 두 개는 둥글게 만들지 않겠다는 의미입니다. */

             /* 내용이 모서리를 넘지 않도록 */
        }

        /* 모달의 내용 스타일 */
        .modal-content {
            width: 70%; /* 모달 내용의 너비 */
            transform: translate(20%, 0%); /* 모달 창 위치 조정 */
        }


    </style>

</head>
<body>    
    <div th:replace="~{common/navi::popup}"></div>
    <div class="container">
        <!-- 상단바 -->
        <div class="row mb-5 pb-2">
            <div class="col">
                <div class="row border-bottom fixed-top px-2" style="background-color: white;">
                    <div class="col-3 pe-0">
                        <img src="/public/img/instaImage/instagram.png" class="img-fluid">
                        <!-- <i class="fa-brands fa-square-instagram" style="color: #E1306C;"></i> -->
                    </div>
                    <div class="col search-container">
                        <i class="ps-2 bi bi-search"></i>         
                        <input value="" name="searchWord" type="text" class="form-control form-control-sm" placeholder="검색">
                    </div>    
                </div>
            </div>
        </div>

        <!-- 스토리 -->
        <!-- overflow-x: auto; 이 클래스가 적용된 요소는 내용이 요소의 크기를 초과할 때, x축 방향으로 스크롤할 수 있게 됩니다. -->
        <div class="row border-bottom mb-2">
            <!-- 스크롤 바 없애는 거 scrollbar-width: none; _ overflow있는 곳에 넣어주기 -->
            <div class="col overflow-x-auto" style="scrollbar-width: none;">
                <div class="row" style="width: 150%;">
                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " th:href="@{./instaMyPage(user_id=${instaUserInfoDto.id})}">
                        <div class="row">
                            <!-- <div class="col">
                                <img class="rounded" th:src="|/bowWow_image/${e.productDto.product_main_img_link}|" style="height: 7em; width: 100%;" >
                            </div> -->

                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <!-- <img th:src="|/basecampImage/${instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle storyImage"> -->
                                        <img th:src="|/images/${instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle storyImage">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <!-- <span th:text="${instaUserInfoDto.insta_nickname}">닉네임</span> -->
                                        <span>내 프로필</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>

                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./instaUserPage">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <img src="/public/img/instaImage/userImg.jpeg" class="img-fluid rounded-circle storyImage" alt="Profile Image">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <span>닉네임</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./instaUserPage">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <img src="/public/img/instaImage/userImg.jpeg" class="img-fluid rounded-circle storyImage" alt="Profile Image">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <span>닉네임</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./instaUserPage">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <img src="/public/img/instaImage/userImg.jpeg" class="img-fluid rounded-circle storyImage" alt="Profile Image">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <span>닉네임</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./instaUserPage">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <img src="/public/img/instaImage/userImg.jpeg" class="img-fluid rounded-circle storyImage" alt="Profile Image">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <span>닉네임</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    <a class="col-auto link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./instaUserPage">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <img src="/public/img/instaImage/userImg.jpeg" class="img-fluid rounded-circle storyImage" alt="Profile Image">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-1 py-1 text-center" style="font-size: 0.7em;">
                                        <span>닉네임</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 게시글 List 출력 -->
        <div class="row mb-4" th:each="instaArticleList : ${instaArticleListAll}">
            <div class="col">
                <div class="row">
                    <!-- 글 작성한 사람 프로필 이미지 -->
                    <a class="col-auto pe-1 link-dark link-offset-2 link-underline link-underline-opacity-0"
                                th:href="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id} ?
                                            @{./instaMyPage(user_id=${instaArticleList.instaUserInfoDto.id})} : @{./instaUserPage(user_id=${instaArticleList.instaUserInfoDto.id})}">
                        <!-- <img th:src="|/basecampImage/${instaArticleList.instaArticleDto.insta_profile_img}|" class="img-fluid rounded-circle commentImage"> -->
                        <img th:src="|/images/${instaArticleList.instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle profileImage">
                    </a>
                    <!-- 글 작성한 사람 닉네임 -->
                    <a class="col-auto ps-0 pt-1 link-dark link-offset-2 link-underline link-underline-opacity-0"
                                th:href="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id} ?
                                            @{./instaMyPage(user_id=${instaArticleList.instaUserInfoDto.id})} : @{./instaUserPage(user_id=${instaArticleList.instaUserInfoDto.id})}">
                        <span th:text="${instaArticleList.instaUserInfoDto.insta_nickname}" style="font-size: 0.8em;"></span>
                    </a>



                    <!-- 오프캠버스의 경우 조건문으로 두가지 이상의 결과를 내야할 때
                         offcanvas id를 조건문에따라서 다르게 해야함 data-bs-target, aria-controls의 이름도 id와 같게 바꿔줘야 함 -->
                    <!-- 세션 아이디와 글쓴 사람 아이디가 같을경우 -->
                    <!-- <div class="col text-end align-self-center"
                         th:if="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id}">
                        <button class="btn p-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMy" aria-controls="offcanvasMy">
                            <i class="bi bi-three-dots"></i>
                        </button>

                        <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasMy" aria-labelledby="offcanvasBottomLabel">
                            <div class="offcanvas-body pt-2 pt-0">
                                <div class="row text-center fontBasic">
                                    <div class="col">
                                        <div class="row border-bottom">
                                            <a class="col link-dark link-underline-opacity-0 py-3" href="./aticleEditPage">
                                                <span>
                                                    수정
                                                </span>
                                            </a>
                                        </div>
                                        <div class="row border-bottom">
                                            <a class="col link-dark link-underline-opacity-0 py-3"
                                               th:href="@{./articleDeleteProcess(article_id=${instaArticleList.instaArticleDto.id}, user_id=${session.sessionUserInfo.id})}">
                                                <span style="color: red;">
                                                    삭제
                                                </span>
                                            </a>
                                        </div>
                                        <div class="row">
                                            <button type="button" class="col py-4" data-bs-dismiss="offcanvas" aria-label="Close" style="border: none; background-color: white;">
                                                취소
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <!-- 모달 _ 자바스크립트로 변경해야 됨 -->
                    <!-- 세션 아이디와 글쓴 사람 아이디가 같을경우 -->
                    <div class="col text-end align-self-center"
                        th:if="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id}">
                        <button class="btn p-0" type="button" data-bs-toggle="modal" data-bs-target="#myModal">
                            <i class="bi bi-three-dots"></i>
                        </button>

                        <!-- Modal -->
                        <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <div class="row text-center fontBasic">
                                            <div class="col">
                                                <div class="row border-bottom">
                                                    <a class="col link-dark link-underline-opacity-0 py-3" href="./aticleEditPage">
                                                        <span>
                                                            수정
                                                        </span>
                                                    </a>
                                                </div>
                                                <div class="row border-bottom">
                                                    <a class="col link-dark link-underline-opacity-0 py-3"
                                                    th:href="@{./articleDeleteProcess(article_id=${instaArticleList.instaArticleDto.id}, user_id=${session.sessionUserInfo.id})}">
                                                        <span style="color: red;">
                                                            삭제
                                                        </span>
                                                    </a>
                                                </div>
                                                <div class="row">
                                                    <button type="button" class="col py-4" data-bs-dismiss="modal" aria-label="Close" style="border: none; background-color: white;">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 모달 _ 자바스크립트로 변경해야 됨 -->
                    <!-- 세션 아이디와 글쓴 사람 아이디가 다를경우 -->
                    <div class="col text-end align-self-center"
                        th:unless="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id}">
                        <button class="btn p-0" type="button" data-bs-toggle="modal" data-bs-target="#userModal">
                            <i class="bi bi-three-dots"></i>
                        </button>

                        <!-- Modal -->
                        <div class="modal fade modal-custom" id="userModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <div class="row text-center fontBasic">
                                            <div class="col">
                                                <div class="row border-bottom">
                                                    <a class="col link-dark link-underline-opacity-0 py-3" href="./aticleBlockPage">
                                                        <span>
                                                            차단
                                                        </span>
                                                    </a>
                                                </div>
                                                <div class="row border-bottom">
                                                    <a class="col link-dark link-underline-opacity-0 py-3" href="./articleReportPage">
                                                        <span style="color: red;">
                                                            신고
                                                        </span>
                                                    </a>
                                                </div>
                                                <div class="row">
                                                    <button type="button" class="col py-4" data-bs-dismiss="modal" aria-label="Close" style="border: none; background-color: white;">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 해당글 이미지 List -->
                <div class="row mt-2">
                    <div class="col px-0">
                        <div th:id="'carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}" class="carousel slide"> <!-- data-bs-ride="carousel" _ 자동 슬라이드를 활성화 -->
                            <!-- 인디케이터 추가 (이미지가 두 개 이상일 때만 표시) _ 이미지 리스트의 크기가 1보다 큰 경우에만 인디케이터와 버튼을 렌더링 -->                            
                            <ol class="carousel-indicators" th:if="${#lists.size(instaArticleList.instaArticleImgDtoList) > 1}">
                                <!-- 이미지 개수만큼 점 생성 -->
                                <li th:each="image, iterStat : ${instaArticleList.instaArticleImgDtoList}"
                                    th:classappend="${iterStat.index == 0 ? 'active' : ''}"
                                    th:data-bs-slide-to="${iterStat.index}">
                                </li>
                                <!-- iterStat은 Thymeleaf에서 반복문을 사용할 때 제공되는 변수로, 반복 상태를 나타내는 객체입니다.
                                     iterStat을 사용하면 반복문에서 현재 반복의 상태를 추적하고, 인덱스나 반복 횟수와 같은 정보를 얻을 수 있습니다. -->
                            </ol>
                            
                            <div class="carousel-inner">
                                <!-- 이미지도 반복문 -->
                                <div th:each="image, iterStat : ${instaArticleList.instaArticleImgDtoList}"
                                     class="carousel-item"
                                     th:classappend="${iterStat.index == 0 ? 'active' : ''}"> <!-- data-bs-interval="5000" _ 5초에 한번씩 사진 슬라이드 -->
                                     <!-- 타임리프에서 classappend라는 구문을 사용하여 HTML 요소의 class 속성에 동적으로 클래스를 추가할 수 있습니다. -->
                                    <img th:src="|/images/${image.img_link}|" class="d-block w-100">
                                </div>
                            </div>
                            
                            <button class="carousel-control-prev" type="button" th:data-bs-target="'#carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}"
                                    data-bs-slide="prev" th:if="${#lists.size(instaArticleList.instaArticleImgDtoList) > 1}">
                                    <!-- 이미지 리스트의 크기가 1보다 큰 경우에만 인디케이터와 버튼을 렌더링 -->
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" th:data-bs-target="'#carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}"
                                    data-bs-slide="next" th:if="${#lists.size(instaArticleList.instaArticleImgDtoList) > 1}">
                                    <!-- 이미지 리스트의 크기가 1보다 큰 경우에만 인디케이터와 버튼을 렌더링 -->
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 잘못 만든거 -->
                <!-- <div class="row mt-3">
                    <div class="col px-0">
                        <div th:id="'carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}" class="carousel slide"> 

                            <ol class="carousel-indicators">
                                
                                <li th:each="image, iterStat : ${instaArticleList.instaArticleImgDtoList}"
                                    th:classappend="${iterStat.index == 0 ? 'active' : ''}"
                                    th:data-bs-slide-to="${iterStat.index}"></li>
                            </ol>
                            
                            <div class="carousel-inner">
                                
                              <div class="carousel-item active"
                                   th:each="image : ${instaArticleList.instaArticleImgDtoList}"> 
                                   <img th:src="|/images/${image.img_link}|" class="d-block w-100">
                              </div>
                            </div>
                            <button class="carousel-control-prev" type="button" th:data-bs-target="'#carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" th:data-bs-target="'#carouselExampleInterval' + ${instaArticleList.instaArticleDto.id}" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                    </div>
                </div> -->


                <div class="row" style="height: 30px;">
                    <!-- 좋아요 -->
                    <div class="col-auto px-0" th:if="${instaArticleList.like == 1}">
                        <form action="./pushArticleLikeDeleteProcess" method="get">
                            <button class="btn">
                                <i class="fa-solid fa-heart likeColor"></i>
                            </button>

                            <input type="hidden" name="user_id" th:value="${session.sessionUserInfo.id}">
                            <input type="hidden" name="article_id" th:value="${instaArticleList.instaArticleDto.id}">
                        </form>
                    </div>
                    <div class="col-auto px-0" th:if="${instaArticleList.like != 1}">
                        <form action="./pushArticleLikeProcess" method="get">
                            <button class="btn">
                                <!-- onclick="like(/*[[${instaArticleList.instaArticleDto.id}]]*/)" -->
                                <i id="heart" onclick="like()" class="fa-regular fa-heart"></i>

                                <input type="hidden" name="user_id" th:value="${session.sessionUserInfo.id}">
                                <input type="hidden" name="article_id" th:value="${instaArticleList.instaArticleDto.id}">
                            </button>
                        </form>
                    </div>

                    <!-- 댓글 -->
                    <div class="col px-0">
                        <form action="./commentWritePage" method="get">
                            <button class="btn px-0">
                                <i class="fa-regular fa-comment"></i>
                            </button>
                            <input type="hidden" name="user_id" th:value="${instaUserInfoDto.id}">
                            <input type="hidden" name="article_id" th:value="${instaArticleList.instaArticleDto.id}">
                        </form>
                    </div>

                    <!-- 북마크 -->
                    <div class="col text-end">
                        <form action="./pushBookmarkProcess" method="get">
                            <button class="btn pe-0">
                                <i class="fa-regular fa-bookmark"></i>
                            </button>
                        </form>
                    </div>
                    <!-- <div class="col text-end">
                        <form action="./pushBookmarkDeleteProcess" method="get">
                            <button class="btn pe-0">
                                <i class="fa-solid fa-bookmark"></i>
                            </button>
                        </form>
                    </div> -->
                </div>

                <!-- 좋아요 수 -->
                <div class="row">
                    <a class="col fontBasic link-dark link-offset-2 link-underline link-underline-opacity-0 " href="./pushLikeUserPage">
                        <span>좋아요</span>
                        <span th:text="${instaArticleList.likeCount}"></span><span>개</span>
                    </a>
                </div>

                <!-- 글 작성한 사람 닉네임,
                     게시글 작성일,
                     내용 -->
                <div class="row justify-content-center">
                    <!-- <a class="col-auto fontBasic pe-0 link-dark link-offset-2 link-underline link-underline-opacity-0" href="./instaUserPage">
                        <span th:text="${instaArticleList.instaUserInfoDto.insta_nickname}"></span>
                    </a> -->
                    <a class="col-auto d-flex align-items-center pe-0 link-dark link-offset-2 link-underline link-underline-opacity-0"
                                th:href="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id} ?
                                            @{./instaMyPage(user_id=${instaArticleList.instaUserInfoDto.id})} : @{./instaUserPage(user_id=${instaArticleList.instaUserInfoDto.id})}">
                        <!-- <span class="fontBasic">saram</span> -->
                        <span class="fontBasic" th:text="${instaArticleList.instaUserInfoDto.insta_nickname}"></span>
                    </a>
                    <div class="col-auto fontBasic ps-1 pe-0">
                        <span th:text="${T(com.bulmeong.basecamp.common.util.TimeUtil).timeAgo(instaArticleList.instaArticleDto.created_at)}" style="color: rgb(162, 162, 162);"></span>                                             
                    </div>
                    <div class="col ps-1 fontBasic">
                        <span th:text="${instaArticleList.instaArticleDto.content}">good day✨</span>   
                    </div>
                </div>
                <div class="row">
                    <div class="col fontBasic instaButtonColor">
                        <span th:each="hashtag : ${instaArticleList.hashtags}" th:utext="${hashtag}" class="hashtag">해시태그</span>
                    </div>
                </div>

                <!-- 댓글 -->
                <div class="row">
                    <a class="col link-dark link-offset-2 link-underline link-underline-opacity-0"
                        th:href="@{./commentWritePage(user_id=${instaUserInfoDto.id}, article_id=${instaArticleList.instaArticleDto.id})}">
                        <span class="fontBasic" style="color: rgb(162, 162, 162);">댓글
                            <span th:text="${instaArticleList.commentCount}"></span>개 모두 보기
                        </span>
                    </a>
                </div>

                <!-- 댓글 작성 -->
                <!-- <div class="row">
                    <div class="col-auto pe-0">
                        <img th:src="|/images/${instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle commentImage">
                    </div>
                    <a class="col ps-1 link-dark link-offset-2 link-underline link-underline-opacity-0"
                        th:href="@{./commentWritePage(user_id=${instaUserInfoDto.id}, article_id=${instaArticleList.instaArticleDto.id})}">
                        <span class="fontBasic" style="color: rgb(162, 162, 162);">댓글 달기...</span>
                    </a>
                </div> -->

                <div class="row">
                    <div class="col-auto pe-0">
                        <!-- 로그인한 유저 프로필 -->
                        <!-- <img th:src="|/basecampImage/${session.instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle commentImage"> -->
                        <img th:src="|/images/${instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle commentImage">
                    </div>
                    <div class="col ps-1">
                        <button onclick="cShow()" class="btn p-0 pb-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasComment" aria-controls="offcanvasComment">
                            <span class="fontBasic" style="color: rgb(162, 162, 162);">댓글 달기...</span>
                        </button>

                        <!-- 오프 캠버스 실행 -->
                    </div>
                </div>

            </div>
        </div>

        <!-- <div class="write-button-container">
            <form action="./instaWritePage" method="get">
                <button class="btn write-button" type="submit" style="background-color: white;">
                    <i class="bi bi-plus-square fs-2"></i>
                </button>
            </form>
        </div> -->

        <!-- 글쓰기 버튼 -->
        <div class="write-button-container">
            <!-- style="aspect-ratio: 1/1;" -> 익스펙토 주문 : 정방향을 만들어준다 -->
            <form action="./instaWritePage" method="get">
                <button class="btn bg-white rounded-2 border border-2 border-black px-2 py-1" type="submit">
                    <i class="fa-solid fa-plus"></i>
                    <input type="hidden" name="user_id" th:value="${instaUserInfoDto.id}">
                </button>
            </form>
        </div>

        <!-- 글쓰기 페이지 -->
        <!-- <form class="row fixed-bottom fixed-write-button" action="./instaWritePage" method="get">
            <div class="col-10"></div>
            <div class="col-2">
                <button class="btn" type="submit">
                    <i class="bi bi-plus-square fs-2 write-button"></i>
                </button>
            </div>
        </form> -->
        
    </div>







    <!-- 댓글 오프캠버스 -->
    <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasComment" aria-labelledby="offcanvasBottomLabel">
        <div class="offcanvas-body pt-2 pt-0">
            <div class="row text-center fontBasic">
                <div class="col">
                    <button onclick="cHide()" class="btn p-0" type="button">
                        <span>댓글 숨기기</span>
                    </button>
                </div>
            </div>
            <!-- 댓글 List 박스 -->
            <div class="row pb-5 mb-5">
                <div id="commentListBox" class="col fontBasic">

                </div>
            </div>


            <div class="row border-top fixed-bottom px-3" style="background-color: white;">
                <!-- 로그인 한 유저 프로필 사진 -->
                <div class="col-auto pe-0">
                    <img th:src="|/images/${instaUserInfoDto.insta_profile_img}|" class="img-fluid rounded-circle commentWriteImage" alt="Profile Image">
                </div>

                <!-- 댓글 작성 form -->
                <!-- <div class="col">
                    <form class="row">
                        <div class="col align-self-center pe-0">
                            <input id="inputText" type="text" class="rounded-5 form-control form-control-sm py-2" placeholder="댓글 추가..." style="font-size: 0.8em;">
                        </div>
                        <div class="col-auto align-self-center ps-1">
                            <button onclick="registerComment()" class="btn rounded-5 px-3 py-1" type="submit" style="color: white; background-color: #0095f6;">
                                <i class="fa-solid fa-arrow-up"></i>
                            </button>
                        </div>
                    </form>
                </div> -->

                <!-- 자바스크립트로 처리하기때문에 form태그가 필요하지않음 -->
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <input id="inputText" class="py-2 form-control rounded-5 fontBasic" placeholder="댓글 추가...">
                            <!-- <textarea  class="form-control "></textarea> -->
                        </div>
                        <div class="col-auto p-0">
                            <!-- <input onclick="registerComment()" type="button" class="btn btn-primary" value="등록"> -->
                            <button onclick="registerComment()" class="send-icon btn rounded-5 px-3 py-1" type="submit" style="color: white; background-color: #0095f6;">
                                <i class="fa-solid fa-arrow-up send-icon i" style="padding-right: 20%;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 하나의 댓글 _ List를 돌게 됨 -->
    <!-- display-none = 안에 있는 내용은 보이지 않음 -->
    <div id="templete" class="d-none">
        <!-- 하나의 댓글 -->
        <div class="commentWrapper row">
            <div class="col mt-3">
                <div class="row pe-1">    
                    <a class="col-auto pe-0 align-self-center link-dark link-offset-2 link-underline link-underline-opacity-0" href="./instaUserPage">
                        <img class="commentProfile img-fluid rounded-circle commentWriteImage">
                    </a>
                    <div class="col align-self-center">
                        <div class="row">
                            <!-- <a class="col-auto commentName ps-0 link-dark link-offset-2 link-underline link-underline-opacity-0"
                                        th:href="${session.sessionUserInfo.id == instaArticleList.instaUserInfoDto.user_id} ?
                                                    @{./instaMyPage(user_id=${instaArticleList.instaUserInfoDto.id})} : @{./instaUserPage(user_id=${instaArticleList.instaUserInfoDto.id})}">
                                <span th:text="${instaArticleList.instaUserInfoDto.insta_nickname}" style="font-size: 0.8em;"></span>
                            </a> -->
                            <a class="commentName col-auto pe-0 link-dark link-offset-2 link-underline link-underline-opacity-0" href="./instaUserPage">
                                닉네임
                            </a>
                            <div class="commentDate col-auto ps-1 pe-0" style="color: rgb(162, 162, 162);">날짜</div>
                            <!-- 삭제버튼 -->
                            <div class="commentButton d-none col" style="color: rgb(162, 162, 162);">
                                <span class="buttonDelete">
                                    <i class="fa-duotone fa-solid fa-xmark"></i>
                                </span>
                            </div>                                                                          
                        </div>
                        <div class="row">
                            <div class="commentText col pe-0">내용</div>
                        </div>
                    </div>

                    <!-- 좋아요 -->
                    <div class="col-auto align-self-center">
                        <div class="row">
                            
                            <!-- 좋아요 안 눌렀을 때 -->
                            <div class="likeButton col align-self-center d-none">
                                <span>
                                    <i class="fa-regular fa-heart"></i>
                                </span>
                            </div>

                            <!-- 좋아요 눌렀을 때 -->
                            <div class="unLikeButton col align-self-center d-none">
                                <span>
                                    <i class="fa-solid fa-heart likeColor"></i>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col p-0 fontNine text-center">
                                <span class="likeCount">4</span>
                            </div>
                        </div>
                    </div>

                    <!-- 인스타모양 삭제 버튼 -->
                    <!-- col이 row 안에 꽉차게 만들어줌 -->
                    <!-- <div class="commentButton d-none col-auto align-self-stretch fs-5 bg-danger px-1 d-flex align-items-center" style="color: white;">
                        <span class="buttonDelete">
                            <i class="fa-solid fa-trash"></i>
                        </span>
                    </div> -->
                </div>
                <div class="row">
                    <div class="col-2"></div>

                    <!-- hidden은 레이아웃은 잡아주되 안 쪽에 내용을 보이지않게 함 -->
                    <!-- d-none은 크기 자체가 없음 -->
                    <a class="commentReply col fw-bold pe-0 link-offset-2 link-underline link-underline-opacity-0" href="./instaCommentReplyPage" style="padding-left: 6px; color: rgb(162, 162, 162); font-size: 0.9em;">
                        답글 달기
                    </a>
                </div>
            </div>        
        </div>
    </div>





    <!-- 팀 공용 하단바 -->
    <div class="container mt-5">
        <div class="row">
            <div class="col">
                <div class="row border-top fixed-bottom" style="background-color: white;">
                    <div class="col">
                        <span>홈</span>
                    </div>
                    <div class="col">
                        <span>쇼핑</span>
                    </div> 
                    <div class="col">
                        <span>예약</span>
                    </div> 
                    <div class="col">
                        <span>커뮤</span>
                    </div> 
                    <div class="col">
                        <span>마이</span>
                    </div> 
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
</body>
</html>
