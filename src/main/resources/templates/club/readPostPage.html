<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"> -->
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" /> -->
    <link rel="stylesheet" href="/public/css/common.css">
    <link rel="stylesheet" href="/public/css/basecamp.css">
    <title>BASECAMP</title>

    <title>Centered Circle with Number</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            /* align-items: center; */
            height: 100vh;
            margin: 0;
        }

        .centered-circle {
            width: 37px;
            height: 37px;
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #000000;
            font-size: 14px;
            font-weight: normal;
        }

        .thicker-light-border {
            border-bottom: 7px solid #dee2e6;
        }
        
    </style>
</head>

<body>
    <div class="container bg-body-tertiary">

        <div class="row pt-3 pb-2 bg-white">
            <div class="col-2 ps-2 justify-content-center align-items-center d-flex"><span onclick="history.back()" class="material-symbols-outlined">arrow_back</span></div>
            <div class="col text-center fw-medium" th:text="${map.clubDto.name}"></div>
            <div class="col-2"></div>
            
        </div>
        
        <!-- 전체 박스 -->
        <div class="row pb-5 mb-5">
            <div class="col">

                <div class="row px-2 bg-white pb-3 pt-4">
                    <div class="col-auto pe-1 fw-bold fs-6" th:if="${session.sessionUserInfo != null}">
                        <a th:if="${confirmPostLike == 0}" th:href="@{/club/postLikeProcess(post_id=${map.clubPostDto.id}, user_id=${session.sessionUserInfo.id})}">
                            <span><i class="bi bi-bookmark lightFont"></i> </span>
                        </a>
                        <a th:unless="${confirmPostLike == 0}" th:href="@{/club/postLikeProcess(post_id=${map.clubPostDto.id}, user_id=${session.sessionUserInfo.id})}">
                            <span><i class="bi bi-bookmark-fill lightFont"></i></span>
                        </a>
                    </div>

                    <div class="col-auto pe-1" th:if="${session.sessionUserInfo == null}">
                        <a>
                            <span><i class="bi bi-bookmark"> </i></span> 
                        </a>
                    </div>
                    <div class="col ps-0">
                        <span th:text="${map.clubPostDto.title}">게시글 제목</span>
                    </div>    
                
                </div>

                <div class="row px-2 bg-white">
                    <div class="col">
                        <div class="row pb-3 align-items-center">
                            <div class="col-2 pe-0">
                                <img th:if="${map.userDto.profile_image == 'default'}" src="/public/img/common/default_profile.png" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
                                <img th:unless="${map.userDto.profile_image == 'default'}" th:src="|/images/${map.userDto.profile_image}|" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
                            </div>
                            <div class="col">
                                <div class="row pb-1">
                                    <div class="col text-secondary" style="font-size: 0.9em;">
                                        <span th:text="${map.userDto.nickname}"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col text-secondary" style="font-size: 0.9em;">
                                        <i class="bi bi-clock"></i>&nbsp;<span th:text="${#dates.format(map.clubPostDto.created_at,'hh:mm')}">08:47</span>
                                        &nbsp;
                                        <i class="bi bi-file-earmark-text"></i>&nbsp;<span th:text="${totalReadCount}"> 27</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col d-flex justify-content-end align-items-center">
                                <div class="centered-circle">
                                    <span th:text="${map.totalComment}">1</span> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row px-2 bg-white border-top mb-2 pb-5 pt-4">
                    <div class="col">

                        <div class="row">
                            <div class="col">
                                <span th:text="${map.clubPostDto.content}">게시글의 내용이 출력되는 부분입니다</span>
                            </div>
                        </div>

                        <!-- 사진 출력 -->
                        <div class="row px-2 bg-white">
                            <div class="col">
                                <img
                                    th:each="clubPostImageDto : ${clubPostImageDtoList}"
                                    th:src="|/images/${clubPostImageDto.post_img_location}|"
                                    class="img-fluid pt-2"
                                >
                            </div>
                        </div>

                    </div>
                </div>

                <!-- 댓글 입력 -->

                <div class="row bg-white mb-5">
                    <div class="col">
                        <div class="row">
                            <div class="col">
                                <div class="row pb-2">
                                    <div class="col-8 fw-semibold">
                                        <span style="font-size: 0.8em;">댓글 </span>
                                        <span class="fw-medium lightFont" style="font-size: 0.8em;" th:text=" ${map.totalComment}"></span> 
                                    </div>
                                    <div class="col ms-0">
                                        <div class="col pe-0 text-end fw-bold"></div>
                                        <div class="col px-2 text-secondary"></div>
                                    </div>
                                    <div class="col pe-0 text-end text-secondary"></div>
                                    <div class="col px-2 fw-bold"></div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col" id="comment-wrapper-box">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <div class="container-fluid fixed-bottom shadow-lg" th:if="${session.sessionUserInfo != null}">
        <form action="/club/writeCommentProcess" method="post" class="row bg-white pb-3 pt-2" id="comment-form">
    
                <div class="col align-self-center text-center me-0 pe-0 fs-1">
                    <a href="">
                        <i class="bi bi-image lightFont"></i>
                    </a>
                </div>
                <div class="col-7 px-0 align-self-center">
                    <input name="content" class="form-control align-self-center comment" type="text" placeholder="댓글을 입력해주세요.">
                </div>

                    <div class="col align-self-center text-center ps-2">

                        <button type="button" class="btn lightBg text-white form-control text-center registerComment">등록</button>
                    <input name="user_id" type="hidden" th:value="${session.sessionUserInfo.id}">
                    <input name="post_id" type="hidden" th:value="${map.clubPostDto.id}">

                </div>

        </form>
    </div>
    
    
    <!-- 댓글 -->
    <div class="col d-none" id="comment-template">
        <div class="row px-2 bg-white pt-3 pb-2 my-0 border-top comment-wrapper">
            <div class="col-2" >
                
                <img th:if="${map.userDto.profile_image == 'default'}" src="/public/img/common/default_profile.png" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
                <img th:unless="${map.userDto.profile_image == 'default'}" th:src="|/images/${map.userDto.profile_image}|" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
    
            </div>
            <div class="col">
                <div class="row" style="font-size:0.9em">
    
                    <div class="col ps-0">
                            <span class="fw-bold commentNickname">닉네임출력</span>
                    </div>
                    <div class="col text-end">
                        <i class="bi bi-three-dots">
                        </i>
                    </div>
              
                </div>
            <div class="row text-secondary" style="font-size:0.8em">
                <div class="col ps-0">
                    <span class="commentCreatedAt">댓글작성일</span>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="row pt-2">
                        <div class="col ps-0">
                            <span class="commentContent">댓글본문</span>
                        </div>
                    </div>
        
                    <div class="row">
                        <div class="col">
        
                            <div class="row py-2">
                                <div class="col-auto d-flex align-items-center d-flex px-0 text-secondary" >
                                    <span class="material-symbols-outlined commentHeart fw-light" style="color: crimson; font-size: 1.3em;">
                                        favorite
                                    </span>
                                </div>
                                
                                <div class="col-auto d-flex align-items-center ps-0">
                                    추천
                                </div>

                                <div class="col-auto d-flex align-items-center px-0 text-secondary" >
                                    <span class="material-symbols-outlined fw-light" style="font-size: 1.3em">
                                        chat_bubble
                                    </span>
                                </div>
                                <div class="col-auto d-flex align-items-center ps-0 writeNestedComment">
                                    댓글쓰기
                                </div>
                            </div>
                                
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>


    <!-- 리댓글 -->
    <div class="col d-none" id="nested-comment-template">
             <div class="row px-2 bg-white py-3 border-top nested-comment-wrapper">
                <div class="col-auto pe-0 me-0 text-center">
                    <i class="bi bi-arrow-return-right"></i>
                </div>
                <div class="col-2 mx-0 ms-auto">
                    <img th:if="${map.userDto.profile_image == 'default'}" src="/public/img/common/default_profile.png" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
                    <img th:unless="${map.userDto.profile_image == 'default'}" th:src="|/images/${map.userDto.profile_image}|" class="img-fluid rounded-circle"  style="aspect-ratio: 1/1;">
                </div>
                <div class="col">
                    <div class="row" style="font-size:0.9em">
                        <div class="col ps-0">
                            <span class="fw-bold nestedCommentNickname">닉네임출력</span>
                        </div>
                    </div>
                    <div class="row text-secondary" style="font-size:0.8em">
                        <div class="col ps-0">
                            <span class="nestedCommentCreatedAt">댓글작성일</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col ps-0 nestedCommentContent">
                            리댓글의 내용이 출력됩니다.
                        </div>
                    </div>
                </div>
            </div>
    </div>
    


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/js/club/club.js"></script>
    <script src="/public/js/lockLikeMobile.js"></script>
</body>
</html>
