<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>BASECAMP</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="/public/css/secondHandProductCss/style.css">
</head>
<body>
<div th:fragment="content">
    <div th:each="list : ${myTransactionCompleteDtoList}">
        <a th:href="@{/secondhandProduct/postDetailsPage(product_id=${list.product_id}, user_id=${list.user_id}, polygon_name=${list.polygon_name})}"
           class="row mx-2 link-custom" style="margin-top: 1.5rem">
            <div class="col-4 me-2" style="height: 7rem;">
                <img class="mainPostImg-custom" th:src="@{/images/{image}(image=${list.main_image})}">
            </div>
            <div class="col ps-0">
                <div class="row-auto">
                    <div class="col">
                        <span th:text="${list.title}" class="main-title-font title-line">제목~</span>
                    </div>
                    <div class="col main-subtitle-font">
                        <span th:text="${list.category_name}">카테고리</span><span>・</span>
                        <span th:text="${list.polygon_name}">위치</span><span>・</span>
                        <span th:if="${list.updated_at != null}"
                              th:text="${T(com.bulmeong.basecamp.common.util.TimeUtil).timeAgo(list.updated_at)}">수정일</span>
                        <span th:if="${list.updated_at == null}"
                              th:text="${T(com.bulmeong.basecamp.common.util.TimeUtil).timeAgo(list.created_at)}">생성일</span>
                    </div>
                    <div class="col">
                        <span th:text="|${#numbers.formatInteger(list.price, 0, 'COMMA')}원|" class="main-price-font">금액</span>
                    </div>
                    <div class="col pt-3 text-end main-like-font">
                        <span><i class="bi bi-chat"></i></span><span class="ms-1" th:text="${list.chat_room_count}">채팅수</span>
                        <span><i class="bi bi-heart"></i></span><span class="ms-1" th:text="${list.wish_list_count}">좋아요수</span>
                    </div>
                </div>
            </div>
        </a>
        <div class="row mx-2 mt-1">
            <a th:href="@{/secondhandProduct/buyerSelectionPage(product_id=${list.product_id}, user_id=${list.user_id})}"
               class="col-10 d-grid pe-0" style="text-decoration: none">
                <button class="btn border d-flex align-items-center justify-content-center" style="height: 2rem; background-color: #28323C">
                    <span style="color: white">
                        <span class="material-symbols-outlined" style="font-size: 0.9rem">border_color</span>
                        후기 보내기
                    </span>
                </button>
            </a>
            <div class="col-2 d-grid ps-0">
                <button class="btn border d-flex align-items-center justify-content-center"
                        style="height: 2rem; background-color: #28323C"
                        data-bs-toggle="modal"
                        data-bs-target="#transactionModal"
                        th:data-product-id="${list.product_id}">
                    <span class="material-symbols-outlined" style="color: white">more_horiz</span>
                </button>
            </div>
        </div>
        <div class="row mx-3">
            <div class="col border-bottom" style="margin-top: 1rem;"></div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
<script src="/public/js/lockLikeMobile.js"></script>
</body>
</html>