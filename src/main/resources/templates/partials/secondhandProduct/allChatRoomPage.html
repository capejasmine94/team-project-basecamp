<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>BASECAMP</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/public/css/secondHandProductCss/style.css">
    <link rel="stylesheet" href="/public/css/secondHandProductCss/chat.css">
</head>
<body>
<div th:fragment="content">
    <div th:each="allChatRoom : ${allChatRoomDto}">
        <a th:href="@{/secondhandProduct/productChatMessagePage(
              product_id=${allChatRoom.product_id},
              chat_room_id=${allChatRoom.chat_room_id},
              nickname=${currentUserId == allChatRoom.buyer_user_id} ? ${allChatRoom.seller_nickname} : ${allChatRoom.buyer_nickname})}"
           class="row mx-2 link-custom" style="margin-top: 2.5rem">
            <div class="col-auto pe-0">
                <img th:src="@{/images/{image}(image=${allChatRoom.main_image})}" class="rounded-2" style="width: 3rem; height: 3rem; border: 0.05rem solid">
            </div>
            <div class="col">
                <div class="row">
                    <div class="col-auto pe-0 fw-semibold d-flex align-items-center">
                        <span th:text="${currentUserId == allChatRoom.buyer_user_id} ? ${allChatRoom.seller_nickname} : ${allChatRoom.buyer_nickname}">상대방</span>
                    </div>
                    <div class="col ps-0 d-flex align-items-center" style="font-size: 0.8rem; margin-left: 0.3rem">
                        <span>위치</span><span class="ms-1 me-1">・</span><span th:text="${T(com.bulmeong.basecamp.common.util.TimeUtil).timeAgo(allChatRoom.message_time)}">시간</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <span class="chat-text-line" style="color:#868e96;" th:text="${allChatRoom.message}">마지막 대화 내용</span>
                    </div>
                </div>
            </div>
        </a>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
</body>
</html>