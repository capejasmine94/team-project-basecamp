<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org:">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/7b271bba58.js" crossorigin="anonymous"></script>
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" />
    <link href="/public/css/common.css" rel="stylesheet">
    <link href="/public/css/basecamp.css" rel="stylesheet">
    <script src="/public/js/lockLikeMobile.js"></script>
    <link rel="shotcut icon" href="/public/img/common/campFire.ico" type="image/x-icon">

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        /* 캐러셀 부모 컨테이너 */
        .topBannerCarousel {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* 양쪽 이미지가 잘리지 않도록 visible 설정 */
        }

        .carousel-inner {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible; /* 양쪽 이미지가 보이도록 설정 */
            display: flex; /* 슬라이드를 가로로 배치 */
            justify-content: center; /* 슬라이드들을 중앙에 배치 */
            margin-top: 70px;
        }

        .carousel-item {
            position: relative;
            flex: 0 0 65%; /* 중앙 슬라이드가 화면의 60%를 차지 */
            height: 100%;
            margin: 0 10px; /* 양쪽 간격을 추가하여 양쪽 이미지가 살짝 보이도록 설정 */
            transition: transform 0.45s ease-in-out, opacity 0.6s ease-in-out;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 이미지가 슬라이드 크기에 맞게 조정 */
        }

        /* 활성화된 슬라이드 (중앙 이미지) */
        .carousel-item.active {
            transform: scale(1); /* 중앙 이미지를 크게 */
            opacity: 1;
            z-index: 2;
        }

        /* 양쪽 슬라이드 (작게 표시) */
        .carousel-item-prev,
        .carousel-item-next {
            transform: scale(0.65); /* 양쪽 슬라이드를 작게 */
            opacity: 0.5; /* 양쪽 슬라이드를 투명하게 */
            z-index: 1;
        }
        .topBannerCarousel .carousel-item .text-group {
            position: absolute;
            left: 5%;
            bottom: 10%;
        }

        .carousel-title {
            font-family: SpoqaHanSansNeo;
            font-size: 15px;
            font-style: normal;
            line-height: 18px;
            text-shadow: 
            -1px -1px 2px rgba(34, 34, 34, 0.2),  /* 검은색 그림자, 부드러운 블러 적용 */
            1px -1px 2px rgba(34, 34, 34, 0.2),  
            -1px  1px 2px rgba(34, 34, 34, 0.2),  
            1px  1px 2px rgba(34, 34, 34, 0.2);  /* 4방향으로 부드럽게 퍼지는 그림자 */
        }

        .carousel-subtitle {
            margin-top: 8px;
            font-family: SpoqaHanSansNeo;
            font-size: 12px;
            font-weight: 500;
            font-style: normal;
            letter-spacing: -0.4;
            opacity: 0.75;
        }
        
        /* ///////// 그외 ///////// */
        .quickMenu-img img {
            aspect-ratio: 1/1;
            width: 100px;
            height: 100%;
            object-position: center;

        }

        .location img {
            aspect-ratio: 1/1;
            width: 100px;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        .text-on-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(0deg); /* 회전 제거 및 중앙 정렬 유지 */
            text-align: center; /* 텍스트를 중앙 정렬 */
            font-size: 12px; /* 폰트 크기 설정, 필요에 따라 조정 */
        }
        .btn-block { /* 버튼 레이아웃 유지 */
            max-width: 100%;
            text-align: left;
            display: inline-block; /* 버튼을 인라인 블록으로 설정하여 텍스트가 줄바꿈되지 않도록 합니다. */
        }

/* /////////new css///////// */

        .search-input {
            border: none;
            outline: none;
            font-size: 16px;
            color: #333;
            border-radius: 25px;
        }

        .search-input::placeholder {
            color: #aaa;
        }
        .search-input-wrapper {
            border: 2px solid #007bff;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .mic-icon {
            font-size: 24px;
            color: #00aaff;
        }

        .map-icon-wrapper {
            background-color: white;
            border: 2px solid #007bff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
        }

        .map-icon {
            color: #007bff;
        }

        /* 카드 스타일 */
        .card {
            border-radius: 15px; /* 모서리 둥글게 */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            width: 170px; /* 카드의 넓이 */
            height: 120px; /* 카드의 높이 */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
        }

        .card-body {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            position: relative; /* 이미지 위치 조정 */
        }

        .card-title {
            font-size: 16px; /* 타이틀 크기 */
            font-weight: bold;
        }

        .card-text {
            font-size: 12px; /* 텍스트 크기 */
            color: #dfe4ea; /* 글씨 색상 */
            margin-bottom: 36px;

        }

        .card img {
            width: 40px; /* 이미지 크기 */
            height: auto;
            position: absolute;
            bottom: -2px;
            right: 5px;
        }

        /* 기본 뱃지 스타일 */
        .badge {
            background-color: #f7f7f7;
            color: black;;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 5px;
            position: absolute;
            right: 5px;
            
        }

        /* 특정 뱃지 위치 조정 */
        .badge-n {
            top: 10px;
            border: 1px solid #F24724;
            background-color: #F24724;
            color: white;
            padding-bottom: 4px
        }

        .badge-discount {
            top: -15px;
            border: 1px solid #773EFA;
            color: #773EFA;
        }

        /* 내비 카드 그라데이션 */
        .nav-card {
            background: linear-gradient(135deg, #6E3FFF, #2158FF);
            color: white;
        }

        .transit-card {
            background: linear-gradient(135deg, #223e5c, #1d3557);
            color: white;
        }

        .parking-card,
        .drive-card {
            background-color: #ffffff;
            color: #333;
            border: 1px solid #ddd;
        }

        /* 카드 간격 조정 */
        .custom-row-spacing {
            margin-left: -5px;
            margin-right: -5px;
        }

        .col-6 {
            padding-left: 5px;
            padding-right: 5px;
            margin-bottom: 10px;
        }

        /*/////////캘린더///////// */
        .calendar-container {
            text-align: center;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }

        .calendar-container table {
            width: 100%;
            border-collapse: collapse; /* 테두리가 겹치지 않도록 설정 */
            margin: 0 auto;
            border: none; /* 전체 테두리 제거 */
            table-layout: fixed; /* 모든 셀이 동일한 크기를 가지도록 설정 */
        }

        .calendar-container th, .calendar-container td {
            padding: 0; /* 패딩을 제거하여 셀의 높이를 고정 */
            text-align: center;
            border: none; /* 셀 테두리 제거 */
            height: 40px; /* 모든 셀의 높이를 동일하게 설정 */
        }

        .calendar-container th {
            color: #999;
            font-weight: bold;
            height: 40px; /* 헤더 셀의 높이도 동일하게 설정 */
            line-height: 40px; /* 수직 정렬을 위해 라인 높이 설정 */
        }

        .calendar-container td {
            cursor: pointer;
        }

        .calendar-container .inactive {
            color: #ccc;
            pointer-events: none;
        }

        .calendar-container .cursor-pointer .date-circle {
            cursor: pointer;
        }

        .calendar-container .selected .date-circle {
            background-color: black;
            color: white;
            border-radius: 50%;
        }

        .calendar-container .today .date-circle {
            border: 2px solid black;
        }

        .calendar-container .cursor-pointer {
            cursor: pointer;
        }

        .calendar-container .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .calendar-container .header button {
            border: none;
            background: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 8px;
        }

        .calendar-container .header button:hover {
            background-color: #f0f0f0;
        }

        .calendar-container .header h4 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .calendar-container .date-circle {
            display: inline-block;
            width: 30px; /* 날짜 원형 크기 조정 */
            height: 30px; /* 날짜 원형 크기 조정 */
            line-height: 30px; /* 텍스트 수직 정렬 */
            border-radius: 50%;
            text-align: center;
            margin: -2px auto; /* 날짜 간격 조정 및 가운데 정렬 */
        }

        .calendar-container .text-primary {
            color: #007bff;
        }

        .list-scroll::-webkit-scrollbar {
            display: none;
        }

    </style>
</head>
<body>
    <!-- topnavi -->
    <div th:replace="~{campingcar/campingNavi::topNavi}"></div>
    
    <div class="container overflow-x-hidden">
        <div class="row">
            <div class="col px-0">
                <div id="carouselExampleInterval" class="carousel slide topBannerCarousel" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="/public/img/campingCarImage/메인이미지1.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold" style="color: white;">
                                    <div>경계 없는 세상의 자연과 나만의 공간, 캠핑카로 시작!</div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="/public/img/campingCarImage/메인이미지2.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold">
                                    <div style="color: ivory;">모터홈에서 만나는 세상의 끝,</div>
                                    <div style="color: ivory;">고요함 속에 찾아온 편안한 휴식</div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="/public/img/campingCarImage/메인이미지3.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold" style="color: white;">
                                    <div>반려동물과 함께하는 자유로운</div>
                                    <div>모터홈 여행</div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="/public/img/campingCarImage/메인이미지5.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold" style="color: white;">
                                    <div>가족과 함께, 자연 속에서 완성되는 특별한 순간</div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="/public/img/campingCarImage/메인이미지6.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold" style="color: white;">
                                    <div>별빛 아래, 자유를 캠핑카에서!</div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="/public/img/campingCarImage/메인이미지7.png" class="d-block rounded-3">
                            <div class="text-group">
                                <div class="carousel-title fw-semibold" style="color: white;">
                                    <div>노을 속 캠핑카에서 완벽한 힐링</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                        </button>
                </div>
            </div>
        </div>
    </div>
    <div class="container position-relative rounded-top-only overflow-x-hidden" style="top: -10px;">
        <!-- 검색바 -->
        <div class="row align-items-center px-3 pb-3 pt-3">
            <div class="col pe-3">
                <div class="row px-3 bg-white rounded-pill search-input-wrapper" style="height: 3em;">
                    <div class="col d-grid p-0">
                        <input type="text" placeholder="어디로 갈까요?" class="w-100 bg-transparent border-0 search-input">
                    </div>
                    <div class="col-auto pe-0 d-flex align-items-center">
                        <span class="mic-icon material-symbols-outlined">search</span>
                    </div>
                </div>
            </div>
            <div class="col-auto p-0 rounded-circle d-flex align-items-center map-icon-wrapper justify-content-center " style="aspect-ratio: 1/1;  height: 2.85em;">
                <span class="map-icon material-symbols-outlined">near_me</span>
            </div>
        </div>
        <!-- 메뉴 -->
        <div class="row">
            <div class="col px-3 quickMenu-img bg-white">
                <div class="row custom-row-spacing mb-1">
                    <div class="col-6">
                        <!-- 차량 대여/반납 완료 되면 여기 수정하자! -->
                        <a href="/campingcar/gotoRentCar" onclick="gotoRentCar(event)">
                            <div class="card nav-card">
                                <div class="card-body">
                                    <div class="card-title fw-smibold">대여</div>
                                    <div class="card-text">최상의 휴식과 힐링</div>
                                    <img src="/public/img/campingCarImage/캠핑카_대여.png" alt="Car Icon">
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-6">
                        <a href="/campingcar/rentUseageHistory" onclick="goToReservationHistory(event)">
                            <div class="card transit-card">
                                <div class="card-body">
                                    <div class="card-title fw-smibold">예약내역</div>
                                    <div class="card-text">나의 예약을 실시간 확인</div>
                                    <img src="/public/img/campingCarImage/calendar.png" alt="Bus Icon">
                                    <div class="badge badge-n">N</div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="row custom-row-spacing mb-2">
                    <div class="col-6">
                        <a href="/campingcar/myLike" onclick="goTomyLike(event)">
                            <div class="card parking-card">
                                <div class="card-body">
                                    <div class="card-title fw-smibold">위시리스트</div>
                                    <div class="card-text text-dark">관심있는 캠핑카 한번에</div>
                                    <img src="/public/img/campingCarImage/좋아요.png" alt="Parking Icon">
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-6">
                        <a href="/campingcar/rentalStatus" onclick="rentalStatus(event)">
                            <div class="card drive-card">
                                <div class="card-body">
                                    <div class="card-title fw-smibold">대여/반납</div>
                                    <div class="card-text text-dark">체크리스트 점검</div>
                                    <img src="/public/img/campingCarImage/camera.png" alt="Drive Icon">
                                    <div class="badge badge-discount">체크리스트는 여기서</div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                
                <!-- 네번째 row -->
                <div class="row pt-3 px-3">
                    <div class="col">
                        <div class="row ps-1 pb-2">
                            <div class="col ps-0 text-start">
                                <div class="fw-semibold new-fs-10">캠핑카</div>
                            </div>
                        </div>
                        
                        <!-- 검색 필터1 -->
                        <div class="row d-flex justify-content-between align-self-center bg-white pt-3 border border-light-subtle">
                            <!-- 대여 장소 -->

                            <div class="col text-center text-light-emphasis form-group px-1">
                                <div class="row">
                                    <div class="col">
                                        <span class="fw-medium"> 대여 장소</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col py-2 pb-3">
                                    <!-- id: 장소선택 버튼 문구를 사용자가 모달창에서 선택한 지역 이름을 동적으로 바꿀 수 있도록 하는 id -->
                                        <button class="btn btn-light btn-block border border-0" id="locationDisplay" onclick="showLocationModal()">장소 선택</button>
                                    </div>
                                </div>
                            </div>
                            <!-- 캠핑카 유형 -->
                            <div class="col text-center text-light-emphasis form-group">
                                <div class="row">
                                    <div class="col">
                                        <span class="fw-medium">캠핑카 유형</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col py-2 pb-3">
                                        <button class="btn btn-light btn-block border border-0 ellipsis-line-two" id="carTypeDisplay" onClick="showCarTypeModal()">유형 선택</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 검색 필터2 -->
                        <div class="row d-flex justify-content-between align-self-center bg-white pt-3 border border-light-subtle">
                            <!-- 대여일 -->
                            <div class="col text-center text-light-emphasis form-group">
                                <div class="row">
                                    <div class="col">
                                        <span class="fw-medium"> 대여일</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col py-2 pb-3">
                                        <button type="button" class="btn btn-light btn-block border border-0" id="rendDateDisplay" onclick="showRentDateModal()">날짜 선택 
                                            <i class="fa-solid fa-chevron-down fa-xs"></i></button>
                                    </div>
                                </div>
                            </div>
                            <!-- 반납일 -->
                            <div class="col text-center text-light-emphasis form-group">
                                <div class="row">
                                    <div class="col">
                                        <span class="fw-medium">반납일</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col py-2 pb-3">
                                        <button type="button" class="btn btn-light btn-block border border-0" id="returnDateDisplay" onclick="showReturnDateModal()">날짜 선택 
                                            <i class="fa-solid fa-chevron-down fa-xs"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 검색하기 버튼 -->
                        <div class="row">
                            <div class="col py-3 px-0 d-grid">
                                <button class="btn btn-bc-dark btn-lg fw-bold"  onclick="search()">검색하기</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row pt-3">
                    <div class="col-9 ps-4 pe-0 ms-1">
                        <span class="new-fs-10 fw-semibold test-start">캠핑카 차량 대여</span>
                    </div>
                    <!-- 더보기 버튼 -->
                    <div class="col-auto ps-4 text-center d-grid" id="loadMoreContainer">
                        <button class="btn btn-ligh text-secondary p-0 text-end d-flex align-items-center" id="loadMoreButton" onclick="loadMoreCampingCars()">
                            <span class="new-fs-75">더보기</span><span class="material-symbols-outlined new-fs-75">arrow_forward_ios</span>
                        </button>
                    </div>
                </div>
                <!-- 캠핑카 등록 차량 반복 출력 -->
                <div class="row mx-0">
                    <div class="col-12">
                        <!-- 가로 스크롤 가능한 컨테이너 -->
                        <div class="d-flex flex-nowrap overflow-auto list-scroll" id="campingcarListBox" style="gap: 16px;">
                            <!-- 여기에 동적으로 리스트가 추가됩니다 -->
                        </div>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-9 ps-4 pb-2 ms-1">
                        <span class="new-fs-10 pe-0 fw-semibold test-start">캠핑카 정보 & 팁</span>
                    </div>
                    <!-- 더보기 버튼 -->
                    <div class="col-auto ps-4 text-center d-grid" id="loadMoreContainer">
                        <button class="btn btn-ligh text-secondary p-0 text-end d-flex align-items-center" id="loadMoreButton" onclick="loadMoreCampingCars()">
                            <span class="new-fs-75">더보기</span><span class="material-symbols-outlined new-fs-75">arrow_forward_ios</span>
                        </button>
                    </div>
                </div>
                <div class="row bg-white">
                    <div class="col overflow-x-auto list-scroll">
                        <div class="row bg-white ps-4 pb-3 d-flex flex-nowrap" style="width: 50%; gap: 8px;">
                            <!-- 정보1 -->
                            <div class="col px-2 pb-1 pt-0 border rounded-4" style="flex: 1 1 calc(20% - 8px);">
                                <div class="row">
                                    <div class="col px-1">
                                        <img class="border img-fluid w-100 rounded-4 rounded-bottom-0" src="/public/img/campingCarImage/캠핑카정보&팁_1.png">
                                    </div>
                                </div>
                                <div class="row pt-2 new-fs-85 fw-semibold">
                                    <div class="col">
                                        <span class="fs-6 semibold ellipsis-line-one">별보러 가자! 별 구경 성지 차바지 추천!</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="new-fs-85 ellipsis-line-two">강릉 안반데기, 화악터널 쌈지공원 스텔라스차박추천 작년, 나혼자산다에서</span>
                                    </div>
                                </div>
                            </div>
                            <!-- 정보2 -->
                            <div class="col px-2 pb-1 pt-0 border rounded-4" style="flex: 1 1 calc(20% - 8px);">
                                <div class="row">
                                    <div class="col px-1">
                                        <img class="border img-fluid w-100 rounded-4 rounded-bottom-0" src="/public/img/campingCarImage/캠핑카정보&팁_2.png">
                                    </div>
                                </div>
                                <div class="row pt-2 new-fs-85 fw-semibold">
                                    <div class="col">
                                        <span class="fs-6 semibold ellipsis-line-one">캠핑카 렌트 방법 꿀팀 총정리 가격부터 종류까지</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col px-2 py-1">
                                        <span class="new-fs-85 ellipsis-line-two">캠핑카 렌트 붐이 일고 있다는 기사를 보신적이 있으신가요? 코로나 시대 일반 여행에 제한이</span>
                                    </div>
                                </div>
                            </div>
                            <!-- 정보3 -->
                            <div class="col px-2 pb-1 pt-0 border rounded-4" style="flex: 1 1 calc(20% - 8px);">
                                <div class="row">
                                    <div class="col px-1">
                                        <img class="border img-fluid w-100 rounded-4 rounded-bottom-0" src="/public/img/campingCarImage/캠핑카정보&팁_3.png">
                                    </div>
                                </div>
                                <div class="row pt-2 new-fs-85 fw-semibold">
                                    <div class="col">
                                        <span class="fs-6 semibold ellipsis-line-one">캠핑 에티넷 함께 살펴보고 건강한 차박문화 만들어가요</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="new-fs-85 ellipsis-line-two">캠핑 에티켓 꼭 지켜야 하나요? 차박과 캠핑카 여행, 즐겁지만 모두가 즐거운 여행을 위한</span>
                                    </div>
                                </div>
                            </div>
                            <!-- 정보4 -->
                            <div class="col px-2 pb-1 pt-0 border rounded-4" style="flex: 1 1 calc(20% - 8px);">
                                <div class="row">
                                    <div class="col px-1">
                                        <img class="border img-fluid w-100 rounded-4 rounded-bottom-0" src="/public/img/campingCarImage/캠핑카정보&팁_4.png">
                                    </div>
                                </div>
                                <div class="row pt-2 new-fs-85 fw-semibold">
                                    <div class="col">
                                        <span class="fs-6 semibold ellipsis-line-one">캠핑카 장비 준비물 이것만 챙긴다면 캠핑 초보 탈출!</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="new-fs-85 ellipsis-line-two">캠핑카 장비 무엇이 있는지 모르겠을때! 초보자가 캠핑카 여행 또는 차박 여행을 가면 어떤것을</span>
                                    </div>
                                </div>
                            </div>
                            <!-- 정보5 -->
                            <div class="col px-2 pb-1 pt-0 border rounded-4" style="flex: 1 1 calc(20% - 8px);">
                                <div class="row">
                                    <div class="col px-1">
                                        <img class="border img-fluid w-100 rounded-4 rounded-bottom-0" src="/public/img/campingCarImage/캠핑카정보&팁_5.png">
                                    </div>
                                </div>
                                <div class="row pt-2 new-fs-85 fw-semibold">
                                    <div class="col">
                                        <span class="fs-6 semibold ellipsis-line-one">혼캠 꿀팁 대방출! 소형 레이 캠핑카, 캠핑용품 추천까지!</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span class="new-fs-85 ellipsis-line-two">혼캠 두근거리기도 하지만 낯설고 어렵기도 하죠? 코로나19로 인해서 여행에 많은 제약이 </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <!-- campingcarList Templete -->
    <div id="campingcarListTemplete" class="d-none">
        <div class="campingcarListWrapper list-scroll row px-3" style="min-width: 240px; max-width: 240px;">
            <div class="col px-0 shadow-sm border rounded-4 my-2">
                <div class="row mx-0">
                    <div class="col px-0 d-flex align-items-center overflow-hidden rounded-top position-relative" style="height: 160px;">
                        <!-- 캠핑카 이미지 -->
                        <img class="campingcarImg img-fluid w-100 rounded-4 rounded-bottom-0" alt="썸네일">
                        <!-- 찜 기능 아이콘 -->
                        <div class="position-absolute top-0 end-0 p-2">
                            <i id="heart-${product_id}" onclick="like()" class="fa-regular fa-heart text-danger"></i>
                        </div>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col">
                        <div class="d-flex flex-column">
                            <!-- 회사명 + 차량명 -->
                            <div class="row">
                                <div class="col pe-0 pb-2 new-fs-8">
                                    <div class="campingcarComp_name fw-bold mb-0 text-truncate"></div> <!-- 한 줄 말줄임표 -->
                                    <div class="campingcarProduct_name fw-normal text-dark mb-0 text-truncate" style="max-height: 3rem; overflow: hidden; text-overflow: ellipsis;"></div> <!-- 여러 줄 말줄임표 -->
                                </div>
                            </div>
                        </div>
                        <!-- 비수기 평일가격 -->
                        <div class="row">
                            <div class="col d-flex align-items-center" style="padding-left: 0.75rem;">
                                <span class="campingcarRental_fee_weekdays new-fs-8 fw-semibold" style="color: #0777F5;"></span>
                            </div>
                        </div>

                        <!-- 차고지 주소 -->
                        <div class="row">
                            <div class="col pt-2 fw-medium">
                                <div class="campingcarGarage_address text-primary-emphasis new-fs-8"></div>
                            </div>
                        </div>
                        <!-- 캠핑카유형 해시태그 -->
                        <div class="row"> 
                             
                            <div class="col pt-2 fw-medium d-flex justify-content-start">
                                <div class="campingcarType_hashtag px-2 py-1 rounded fw-semibold new-fs-8" style="background-color: #F0F4F7; color: #808485;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- 대여 장소 선택 모달-->
    <div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title fs-5 fw-semibold text-center w-100" id="locationModalLabel">대여 장소 선택</div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row pb-2">
                            <div class="col-12 d-flex justify-content-center">
                                <button type="button" class="btn btn-outline-light text-dark w-100" data-location="전체">전체</button>
                            </div>
                        </div>
                        <!-- 대여 지역 리스트 박스 -->
                        <div class="row d-flex flex-wrap" id="regionsListBox"></div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="btn btn-bc-dark w-100 " data-bs-dismiss="modal">취소하기</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 지역선택 모달 Template -->
    <div id="regionsListTemplate" class="d-none">
        <div class="regionstsListWrapper col-6 pb-2 d-flex justify-content-center">
            <span class="regionsBtn btn btn-outline-light text-dark w-100"></span>
        </div>
    </div>
    <!-- 캠핑카 유형 선택 모달 -->
    <div class="modal fade" id="campingcarModal" tabindex="-1" aria-labelledby="campingcarModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title fs-5 fw-semibold text-center w-100" id="campingcarModalLabel">캠핑카 유형 선택</div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row" id="carTypeCheckListBox"></div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button" class="carTypeBtn btn btn-bc-dark w-100" data-bs-dismiss="modal" onClick="updateSelectedCarTypes()">선택</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 캠핑카선택 모달 Template -->
    <div id="carTypeCheckListTemplate" class="d-none">
        <div class="col-12 pb-2">
            <div class="carTypeCheckListWrapper form-check d-flex align-items-center">
                <input class="carTypeCheck form-check-input" type="checkbox">
                <label class="ps-2 form-check-label"></label>
            </div>
        </div>
    </div>
    <!-- 대여일 모달 -->
    <div class="modal fade" id="rentdateModal" tabindex="-1" aria-labelledby="rentdateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-center w-100 ps-4" id="rentdateModalLabel">언제 필요한가요?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="calendar"></div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-bc-dark w-100" data-bs-dismiss="modal" onclick="confirmRentDate()">확인</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 반납일 모달 -->
    <div class="modal fade" id="returndateModal" tabindex="-1" aria-labelledby="returndateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-center w-100 ps-4" id="returndateModalLabel">반납일 선택</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="calendarReturn"></div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-bc-dark w-100 " data-bs-dismiss="modal" onclick="confirmReturnDate()">확인</button>
                </div>
            </div>
        </div>
    </div>



    <!-- footer -->
    <div th:replace="~{campingcar/campingNavi::footerNavi}"></div>
    <!-- bottom -->
    <div th:replace="~{campingcar/campingNavi::bottomNaviBasecamp}"></div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!-- Bootstrap JS -->
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const carouselElement = document.getElementById('carouselExampleInterval');

            if (carouselElement) {
                // 슬라이드 전환 시 실행되는 이벤트 핸들러
                carouselElement.addEventListener('slid.bs.carousel', function () {
                    const activeItem = document.querySelector('.carousel-item.active');
                    const prevItem = activeItem.previousElementSibling || document.querySelector('.carousel-item:last-child');
                    const nextItem = activeItem.nextElementSibling || document.querySelector('.carousel-item:first-child');

                    // 모든 슬라이드 초기화
                    document.querySelectorAll('.carousel-item').forEach(item => {
                        item.style.transform = 'scale(0.85)';
                        item.style.opacity = '0.5';
                        item.style.zIndex = '1';
                    });

                    // 활성화된 슬라이드 (중앙)
                    activeItem.style.transform = 'scale(1)';
                    activeItem.style.opacity = '1';
                    activeItem.style.zIndex = '2';

                    // 이전 슬라이드 처리 (왼쪽에 작게 표시)
                    prevItem.style.transform = 'scale(0.85)';
                    prevItem.style.opacity = '0.5';
                    prevItem.style.zIndex = '1';

                    // 다음 슬라이드 처리 (오른쪽에 작게 표시)
                    nextItem.style.transform = 'scale(0.85)';
                    nextItem.style.opacity = '0.5';
                    nextItem.style.zIndex = '1';
                });

                // 페이지 로드 시 첫 슬라이드와 양쪽 슬라이드 설정
                const activeItem = document.querySelector('.carousel-item.active');
                const prevItem = activeItem.previousElementSibling || document.querySelector('.carousel-item:last-child');
                const nextItem = activeItem.nextElementSibling || document.querySelector('.carousel-item:first-child');

                // 중앙 슬라이드
                activeItem.style.transform = 'scale(1)';
                activeItem.style.opacity = '1';
                activeItem.style.zIndex = '2';

                // 왼쪽 슬라이드 (이전 슬라이드)
                prevItem.style.transform = 'scale(0.85)';
                prevItem.style.opacity = '0.5';
                prevItem.style.zIndex = '1';

                // 오른쪽 슬라이드 (다음 슬라이드)
                nextItem.style.transform = 'scale(0.85)';
                nextItem.style.opacity = '0.5';
                nextItem.style.zIndex = '1';
            } else {
                console.error("Element with ID 'carouselExampleInterval' not found.");
            }
        });
    </script>

    <script>
        // 페이지 로드 시 실행되는 이벤트를 등록합니다.
        window.addEventListener("DOMContentLoaded", () => {
            // 페이지가 완전히 로드되면 세션에서 사용자 ID를 설정하고, 캠핑카 리스트를 로드합니다.
            setSessionUserId();
            loadCampingCarList();                          
        });

        // 전역 변수: 사용자 ID 초기화
        let myId = null;

        // 세션에서 사용자 ID를 가져오는 함수
        function setSessionUserId() {
            // 사용자 ID를 가져오는 API 요청
            const url = "/api/rent-user/getSessionUserId";
            fetch(url)
                .then(response => response.json()) // JSON 형식으로 응답을 처리
                .then((response) => {
                    // 응답에서 사용자 ID를 추출하여 전역 변수에 저장
                    myId = response.data.id;
                });
        }

        //대여하기 버튼 클릭 이벤트 리스너 추가
        function gotoRentCar(envet) {
            // 링크의 기본 동작을 차단
            event.preventDefault();

        // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
        if (myId == null) {
            alert("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동해 주세요.");
            return;
        }

        // rent_user_id를 확인하는 API 요청
        const checkUrl = `/api/rent-user/isRentUser`;
        fetch(checkUrl)
            .then(response => response.json())
            .then(response => {
                if (response.data.isRentUser) {
                    // rent_user_id가 있는 경우, 대여하기 페이지로 이동
                    window.location.href = "/campingcar/gotoRentCar";
                } else {
                    // rent_user_id가 없는 경우 경고 메시지 표시하고 페이지 이동 차단
                    alert("캠핑카 고객만 서비스를 이용하실 수 있습니다.");
                    return;
                }
            });
        }


        // 예약내역 버튼 클릭 이벤트 리스너 추가
        function goToReservationHistory(event) {
            // 링크의 기본 동작을 차단
            event.preventDefault();

            // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
            if (myId == null) {
                alert("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동해 주세요.");
                return;
            }

            // rent_user_id를 확인하는 API 요청
            const checkUrl = `/api/rent-user/isRentUser`;
            fetch(checkUrl)
                .then(response => response.json())
                .then(response => {
                    if (response.data.isRentUser) {
                        // rent_user_id가 있는 경우, 예약 내역 페이지로 이동
                        window.location.href = "/campingcar/rentUseageHistory";
                    } else {
                        // rent_user_id가 없는 경우 경고 메시지 표시하고 페이지 이동 차단
                        alert("캠핑카 고객만 서비스를 이용하실 수 있습니다.");
                        return;
                    }
                });
        }

        // 좋아요 내역 버튼 클릭 이벤트 리스너 추가
        function goTomyLike(event) {
            // 링크의 기본 동작을 차단
            event.preventDefault();

            // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
            if (myId == null) {
                alert("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동해 주세요.");
                return;
            }

            // rent_user_id를 확인하는 API 요청
            const checkUrl = `/api/rent-user/isRentUser`;
            fetch(checkUrl)
                .then(response => response.json())
                .then(response => {
                    if (response.data.isRentUser) {
                        // rent_user_id가 있는 경우, 좋아요 내역 페이지로 이동
                        window.location.href = "/campingcar/myLike";
                    } else {
                        // rent_user_id가 없는 경우 경고 메시지 표시하고 페이지 이동 차단
                        alert("캠핑카 고객만 서비스를 이용하실 수 있습니다.");
                        return;
                    }
                });
        }

        // 차량 대여 반납 점검 내역 이벤트 리스너
        function rentalStatus() {
            // 링크의 기본 동작을 차단
            event.preventDefault();

            // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
            if (myId == null) {
                alert("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동해 주세요.");
                return;
            }

            // rent_user_id를 확인하는 API 요청
            const checkUrl = `/api/rent-user/isRentUser`;
            fetch(checkUrl)
                .then(response => response.json())
                .then(response => {
                    if (response.data.isRentUser) {
                        // rent_user_id가 있는 경우, 차량 대여 반납 점검 내역 페이지로 이동
                        window.location.href = "/campingcar/rentalStatus";
                    } else {
                        // rent_user_id가 없는 경우 경고 메시지 표시하고 페이지 이동 차단
                        alert("캠핑카 고객만 서비스를 이용하실 수 있습니다.");
                        return;
                    }
                });
        }

        let currentCarIndex = 0;
        const carsPerPage = 7;
        let campingCarList = [];

        // 캠핑카 리스트를 로드하고 화면에 표시하는 함수
        function loadCampingCarList() {
            const url = "/api/campingcar/campingcarList";
            fetch(url)
                .then(response => response.json())
                .then(response => {
                    campingCarList = response.data.campingcarList;
                    displayCampingCars(); // 처음 carsPerPage개의 차량을 표시
                });
        }

        // 차량을 화면에 표시하는 함수
        function displayCampingCars() {
            const campingcarListBox = document.getElementById("campingcarListBox");
            
            // 표시할 차량 범위를 설정
            const endIndex = Math.min(currentCarIndex + carsPerPage, campingCarList.length);

            for (let i = 0; i < endIndex; i++) {
                const e = campingCarList[i];
                const newCampingcarListWrapper = document.querySelector("#campingcarListTemplete .campingcarListWrapper").cloneNode(true);

                // 차량 정보 설정
                const campingcarImg = newCampingcarListWrapper.querySelector(".campingcarImg");
                campingcarImg.setAttribute("src", `/images/${e.main_img}`);
                const heart = newCampingcarListWrapper.querySelector(".fa-heart");
                heart.setAttribute("id", `heart-${e.id}`);
                heart.setAttribute("onclick", `like(${e.id}, event)`);
                newCampingcarListWrapper.querySelector(".campingcarComp_name").innerText = e.comp_name;
                newCampingcarListWrapper.querySelector(".campingcarProduct_name").innerText = e.product_name;
                newCampingcarListWrapper.querySelector(".campingcarRental_fee_weekdays").innerText = `${e.rental_fee_weekdays.toLocaleString('ko-KR')}원`;
                newCampingcarListWrapper.querySelector(".campingcarGarage_address").innerText = `차고지 주소 : ${e.garage_address}`;
                newCampingcarListWrapper.querySelector(".campingcarType_hashtag").innerText = `#${e.car_type_name}`;

                campingcarListBox.appendChild(newCampingcarListWrapper);
                reloadLike(e.id);

                // 상세 페이지 이동
                newCampingcarListWrapper.addEventListener('click', () => {
                    window.location.href = `/campingcar/campingCarDetailPage?id=${e.id}`;
                });
            }

            // 인덱스를 업데이트하여 다음 항목을 표시할 수 있도록 함
            currentCarIndex = endIndex;

            // "더보기" 버튼 표시 여부 결정
            const loadMoreContainer = document.getElementById("loadMoreContainer");
            if (currentCarIndex >= campingCarList.length) {
                loadMoreContainer.style.display = "none";
            } else {
                loadMoreContainer.style.display = "block";
            }
        }

        // "더보기" 버튼 클릭 시 호출되는 함수
        function loadMoreCampingCars() {
            currentCarIndex -= carsPerPage; // 이전 인덱스로 이동하여 더보기 클릭 시 이전 차량 포함
            displayCampingCars();
        }   

        // 좋아요 클릭 함수
        function like(product_id, event) {
            event.stopPropagation(); // 이벤트 전파 중지

            // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
            if (myId == null) {
                if (confirm("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동하시겠습니까?")) {
                    location.href = "/user/login";
                }
                return;
            }

            // rent_user_id를 확인하는 API 요청
            const checkUrl = `/api/rent-user/isRentUser`;
            fetch(checkUrl)
            .then(response => response.json())
            .then(response => {
                if (response.data.isRentUser) {
                    // rent_user_id가 있는 경우, 좋아요를 추가하는 API 요청
                    const url = `/api/rent-user/like?product_id=${product_id}`;
                    fetch(url)
                        .then(response => response.json()) // JSON 형식으로 응답을 처리
                        .then(response => {
                            // 좋아요 상태를 갱신합니다.
                            reloadLike(product_id);
                        });
                } else {
                    // rent_user_id가 없는 경우 경고 메시지 표시
                    alert("캠핑카 고객만 서비스를 이용하실 수 있습니다.");
                }
            });
        }


        // 좋아요 상태를 갱신하는 함수
        function reloadLike(product_id) {
            // 사용자가 로그인하지 않은 경우 함수 종료
            if (myId == null) {
                return; 
            }

            // 찜 여부를 확인하는 API 요청
            const url = `/api/rent-user/isLiked?product_id=${product_id}`;
            fetch(url)
                .then(response => response.json()) // JSON 형식으로 응답을 처리
                .then(response => {
                    // 콘솔 로그로 상태 확인
                    // console.log("isLiked 여부 응답 확인: ", response.data.isLikedByUser);
                    // console.log("myId 확인 : ", myId);
                    
                    // 특정 차량의 하트 아이콘 선택
                    const heart = document.getElementById(`heart-${product_id}`);
                    // console.log("heart의 product_id 값 확인: ", heart);

                    // 사용자가 이미 좋아요를 눌렀는지 여부를 확인
                    if (response.data.isLikedByUser == true) {
                        // 좋아요가 눌린 상태: 하트 아이콘의 클래스를 fa-solid로 변경하여 강조
                        heart.classList.remove("fa-regular");
                        heart.classList.add("fa-solid");

                        // setAttribute 메서드를 사용하여 하트 아이콘의 onclick 속성을 설정합니다.
                        // 현재 좋아요 상태일 경우 클릭 시 좋아요를 취소하는 unLike() 함수가 호출되도록 설정합니다.
                        heart.setAttribute("onclick", `unLike(${product_id}, event)`);
                    } else {
                        // 좋아요가 눌리지 않은 상태: 하트 아이콘의 클래스를 fa-regular로 변경하여 비활성화
                        heart.classList.remove("fa-solid");
                        heart.classList.add("fa-regular");

                        // setAttribute 메서드를 사용하여 하트 아이콘의 onclick 속성을 설정합니다.
                        // 현재 좋아요 상태가 아닐 경우 클릭 시 좋아요를 추가하는 like() 함수가 호출되도록 설정합니다.
                        heart.setAttribute("onclick", `like(${product_id}, event)`);
                    }
                });
        }

        // 좋아요 취소 함수
        function unLike(product_id, event) {
            event.stopPropagation(); // 이벤트 전파 중지

            // 사용자가 로그인하지 않은 경우 로그인 페이지로 리다이렉트
            if (myId == null) {
                if (confirm("로그인 하셔야 이용 가능합니다. 로그인 페이지로 이동하시겠습니까?")) {
                    location.href = "/user/loginPage";
                }
                return;
            }

            // 좋아요를 취소하는 API 요청
            const url = `/api/rent-user/unLike?product_id=${product_id}`;
            fetch(url)
                .then(response => response.json()) // JSON 형식으로 응답을 처리
                .then(response => {
                    // 좋아요 상태를 갱신합니다.
                    reloadLike(product_id);
                });
        }

        // 대여 장소 선택 모달 열기 함수 
        const showLocationModal = () => {
            const locationModal = document.getElementById("locationModal"); 
            const modal = new bootstrap.Modal(locationModal);
            loadRegionOptionList(); // 모달을 열 때 지역 옵션 목록을 로드
            modal.show();
        }

        // 대여 장소 모달의 지역 리스트 함수 
        function loadRegionOptionList() {
            const url = "/api/rent-user/getRegionsAll";
            fetch(url)
            .then(response => response.json())
            .then(response => {
                const regionsListBox = document.getElementById("regionsListBox");
                // 컨테이너의 기존 내용을 초기화
                regionsListBox.innerHTML = "";

                const regionsListWrapperTemplate  = document.querySelector("#regionsListTemplate .regionstsListWrapper"); 

                // 차량 지역 리스트의 각 항목을 반복 처리
                for (const regionsList of response.data.allRegionsList) {
                    const newRegionsListWrapperTemplate = regionsListWrapperTemplate.cloneNode(true);

                    const newregionsButton = newRegionsListWrapperTemplate.querySelector(".regionsBtn"); 
                    newregionsButton.innerText = regionsList.name;
                    
                    // 지역 버튼 클릭한 것을 click 이벤트 추가
                    newregionsButton.addEventListener('click', () => {
                        // 'locationDisplay'라는 ID를 가진 요소(장소 선택이라는 버튼)의 텍스트를 선택한 지역의 이름으로 동적으로 설정
                        document.getElementById("locationDisplay").innerText = regionsList.name;
                        // Bootstrap 모달 인스턴스를 가져와서 모달 닫기
                        const modalInstance = bootstrap.Modal.getInstance(locationModal);// 모달 인스턴스 가져오기
                        modalInstance.hide();// 모달 닫기
                    });

                    regionsListBox.appendChild(newRegionsListWrapperTemplate);
                }
            });
        }

        let selectedCarTypes = [];

        // 캠핑카 유형 선택 모달 열기 함수 
        const showCarTypeModal = () => {
            const campingcarModal = document.getElementById("campingcarModal"); 
            const carTypeModal = new bootstrap.Modal(campingcarModal);
            loadCampingCarTypeOptionList();
            carTypeModal.show();
        }

        // 캠핑카유형 선택 모달의 지역 리스트 함수 
        function loadCampingCarTypeOptionList() {
            const url = "/api/rent-user/getCarTypeAll";
            fetch(url)
            .then(response => response.json())
            .then(response => {
                const carTypeCheckListBox = document.getElementById("carTypeCheckListBox");
                // 컨테이너의 기존 내용을 초기화
                carTypeCheckListBox.innerHTML = "";

                const carTypeListWrapperTemplate  = document.querySelector("#carTypeCheckListTemplate .carTypeCheckListWrapper"); 

                let id = 0;
                // 캠핑카 유형 리스트의 각 항목을 반복 처리
                for(const carTypeList of response.data.allCarType) {
                    const newCarTypeListWrapperTemplate = carTypeListWrapperTemplate.cloneNode(true);

                    const newCarTypeCheck = newCarTypeListWrapperTemplate.querySelector(".carTypeCheck"); 
                    newCarTypeCheck.value = carTypeList.name; // 체크박스의 값 설정
                    newCarTypeCheck.id = `carTypeCheck${id}`; // 체크박스의 고유한 ID 설정

                    const newCarTypeLabel = newCarTypeListWrapperTemplate.querySelector(".form-check-label");
                    newCarTypeLabel.innerText = carTypeList.name; // 라벨에 텍스트 설정
                    newCarTypeLabel.setAttribute("for", `carTypeCheck${id}`); // 라벨의 for 속성 설정

                    // 이벤트 리스너 추가 : 선택된 체크박스의 함수 콜백
                    newCarTypeCheck.addEventListener('change', (event) => selectCarType(event));

                    carTypeCheckListBox.appendChild(newCarTypeListWrapperTemplate); // 복제된 템플릿을 체크박스 목록에 추가
                    id++;  // 고유한 ID를 위해 id 값 증가
                }
            });
        }

        // 선택된 캠핑카 유형  
        function selectCarType(event) { 
            if (event.target.checked) {
                // 체크박스가 체크되었으면 배열에 추가
                selectedCarTypes.push(event.target.value);
            } else {
                // 체크박스가 체크 해제되었으면 배열에서 제거
                selectedCarTypes = selectedCarTypes.filter(value => value !== event.target.value);
            }
        }

        function updateSelectedCarTypes() {
            // 선택된 캠핑카 유형들을 콤마로 구분하여 표시
            document.getElementById("carTypeDisplay").innerText = selectedCarTypes.join(', ');
        }

        // 대여일 모달 열기 함수 
        const showRentDateModal = () => {
            const rentDateModalOpen = document.getElementById("rentdateModal");
            const rentDateModal = new bootstrap.Modal(rentDateModalOpen);
            rentDateModal.show();
            renderCalendar(currentMonth, currentYear);
        }

        // 반납일 모달 열기 함수 
        const showReturnDateModal = () => {
            const returnDateModalOpen = document.getElementById("returndateModal");
            const returnDateModal = new bootstrap.Modal(returnDateModalOpen);
            returnDateModal.show();
            renderReturnCalendar(currentMonth, currentYear);
        }

        const today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();
        let lastSelectedDate = null;
        let lastSelectedReturnDate = null;

        document.addEventListener("DOMContentLoaded", () => {
            renderCalendar(currentMonth, currentYear);
            renderReturnCalendar(currentMonth, currentYear);
        });

        function renderCalendar(month, year) {
            const firstDay = new Date(Date.UTC(year, month, 1)).getUTCDay();
            const lastDate = new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
            const lastDatePrevMonth = new Date(Date.UTC(year, month, 0)).getUTCDate();
            const calendar = document.getElementById("calendar");

            let html = `
                <div class="calendar-container">
                    <div class="header">
                        <button class="btn btn-light" id="prevMonth" onclick="changeMonth(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h4 id="monthYear">${year}.${month + 1 < 10 ? '0' : ''}${month + 1}</h4>
                        <button class="btn btn-light" id="nextMonth" onclick="changeMonth(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="text-danger">일</th>
                                <th>월</th>
                                <th>화</th>
                                <th>수</th>
                                <th>목</th>
                                <th>금</th>
                                <th class="text-primary">토</th>
                            </tr>
                        </thead>
                        <tbody id="calendarBody">
            `;

            let date = 1;
            let nextMonthDate = 1;

            for (let i = 0; i < 6; i++) {
                html += '<tr>';
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDay) {
                        html += `<td class="inactive">${lastDatePrevMonth - firstDay + 1 + j}</td>`;
                    } else if (date > lastDate) {
                        html += `<td class="inactive">${nextMonthDate++}</td>`;
                    } else {
                        let cellDate = new Date(Date.UTC(year, month, date));
                        let cellClass = (cellDate < today && !(cellDate.getUTCDate() === today.getUTCDate() && cellDate.getUTCMonth() === today.getUTCMonth() && cellDate.getUTCFullYear() === today.getUTCFullYear())) ? 'inactive' : 'cursor-pointer';
                        if (date === today.getUTCDate() && month === today.getUTCMonth() && year === today.getUTCFullYear() && !lastSelectedDate) {
                            cellClass += ' today';
                        }
                        html += `<td class="${cellClass}" data-date="${cellDate.toISOString().split('T')[0]}" onclick="selectDate(this, '${cellDate.toISOString().split('T')[0]}')"><span class="date-circle">${date++}</span></td>`;
                    }
                }
                html += '</tr>';
            }

            html += `
                            </tbody>
                        </table>
                    </div>
            `;

            calendar.innerHTML = html;

            // 재선택된 날짜가 현재 월에 있으면 해당 날짜에 선택 표시 추가
            if (lastSelectedDate) {
                const selectedCell = document.querySelector(`[data-date="${lastSelectedDate}"]`);
                if (selectedCell) {
                    selectedCell.classList.add('selected');
                }
            }
        }

        function renderReturnCalendar(month, year) {
            const firstDay = new Date(Date.UTC(year, month, 1)).getUTCDay();
            const lastDate = new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
            const lastDatePrevMonth = new Date(Date.UTC(year, month, 0)).getUTCDate();
            const calendarReturn = document.getElementById("calendarReturn");

            let html = `
                <div class="calendar-container">
                    <div class="header">
                        <button class="btn btn-light" id="prevMonthReturn" onclick="changeReturnMonth(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h4 id="monthYear">${year}.${month + 1 < 10 ? '0' : ''}${month + 1}</h4>
                        <button class="btn btn-light" id="nextMonthReturn" onclick="changeReturnMonth(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="text-danger">일</th>
                                <th>월</th>
                                <th>화</th>
                                <th>수</th>
                                <th>목</th>
                                <th>금</th>
                                <th class="text-primary">토</th>
                            </tr>
                        </thead>
                        <tbody id="calendarBodyReturn">
            `;

            let date = 1;
            let nextMonthDate = 1;

            for (let i = 0; i < 6; i++) {
                html += '<tr>';
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDay) {
                        html += `<td class="inactive">${lastDatePrevMonth - firstDay + 1 + j}</td>`;
                    } else if (date > lastDate) {
                        html += `<td class="inactive">${nextMonthDate++}</td>`;
                    } else {
                        let cellDate = new Date(Date.UTC(year, month, date));
                        let cellClass = (cellDate < today && !(cellDate.getUTCDate() === today.getUTCDate() && cellDate.getUTCMonth() === today.getUTCMonth() && cellDate.getUTCFullYear() === today.getUTCFullYear())) ? 'inactive' : 'cursor-pointer';
                        if (date === today.getUTCDate() && month === today.getUTCMonth() && year === today.getUTCFullYear() && !lastSelectedReturnDate) {
                            cellClass += ' today';
                        }
                        html += `<td class="${cellClass}" data-date="${cellDate.toISOString().split('T')[0]}" onclick="selectReturnDate(this, '${cellDate.toISOString().split('T')[0]}')"><span class="date-circle">${date++}</span></td>`;
                    }
                }
                html += '</tr>';
            }

            html += `
                            </tbody>
                        </table>
                    </div>
            `;

            calendarReturn.innerHTML = html;

            // 재선택된 날짜가 현재 월에 있으면 해당 날짜에 선택 표시 추가
            if (lastSelectedReturnDate) {
                const selectedCell = document.querySelector(`[data-date="${lastSelectedReturnDate}"]`);
                if (selectedCell) {
                    selectedCell.classList.add('selected');
                }
            }
        }

        function changeMonth(direction) {
            currentMonth += direction;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentMonth, currentYear);
        }

        function changeReturnMonth(direction) {
            currentMonth += direction;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderReturnCalendar(currentMonth, currentYear);
        }

        function selectDate(cell, date) {
            document.querySelectorAll('#calendarBody td').forEach(td => td.classList.remove('selected', 'today'));
            cell.classList.add('selected');

            lastSelectedDate = date;
            console.log(`Selected date: ${lastSelectedDate}`);
        }

        function selectReturnDate(cell, date) {
            document.querySelectorAll('#calendarBodyReturn td').forEach(td => td.classList.remove('selected', 'today'));
            cell.classList.add('selected');

            lastSelectedReturnDate = date;
            console.log(`Selected return date: ${lastSelectedReturnDate}`);
        }

        function confirmRentDate() {
            const selectedDate = document.querySelector('#calendarBody td.selected').dataset.date;
            if (selectedDate) {
                const displayDate = new Date(selectedDate);
                document.getElementById("rendDateDisplay").textContent = displayDate.toISOString().split('T')[0];
            }
        }

        function confirmReturnDate() {
            const selectedReturnDate = document.querySelector('#calendarBodyReturn td.selected').dataset.date;
            if (selectedReturnDate) {
                const displayDate = new Date(selectedReturnDate);
                document.getElementById("returnDateDisplay").textContent = displayDate.toISOString().split('T')[0];
            }
        }

        // 검색 버튼 클릭 이벤트 리스너 추가
        function search() {
            const selectedLocation = document.getElementById("locationDisplay").innerText;
            const selectedCarTypes = document.getElementById("carTypeDisplay").innerText.split(', ');
            const selectedRentDate = document.getElementById("rendDateDisplay").innerText;
            const selectedReturnDate = document.getElementById("returnDateDisplay").innerText;

            // 필터링 조건에 맞는 검색 결과 페이지로 이동
            const queryString = `location=${selectedLocation}&carTypes=${selectedCarTypes.join(',')}&rentDate=${selectedRentDate}&returnDate=${selectedReturnDate}`;
            window.location.href = `/campingcar/searchResultsPage?${queryString}`;
        }

    </script>
</body>
</html>
<!-- /* 설명 주석
1. newRegionButton.addEventListener('click', () => { ... });:
   - 설명: addEventListener는 지정된 이벤트가 대상에서 발생할 때 호출할 함수를 설정합니다. 여기서 'click' 이벤트를 설정하여 버튼이 클릭될 때 특정 동작을 수행하도록 합니다.
   - 사용법:
     element.addEventListener(event, function);
     element: 이벤트 리스너를 추가할 대상 요소입니다. 여기서는 newRegionButton입니다.
     event: 리스너를 추가할 이벤트 유형입니다. 여기서는 'click'입니다.
     function: 이벤트가 발생했을 때 실행할 함수입니다. 여기서는 익명 함수(() => { ... })를 사용했습니다.

2. document.getElementById('locationDisplay').innerText = region.name;
   - 설명: document.getElementById는 HTML 문서에서 지정된 ID를 가진 요소를 반환합니다. innerText는 해당 요소의 텍스트 콘텐츠를 설정하거나 반환합니다. 여기서는 locationDisplay라는 ID를 가진 요소의 텍스트를 선택한 지역의 이름(region.name)으로 설정합니다.
   - 사용법:
     const element = document.getElementById(id);
     element.innerText = text;
     id: 찾고자 하는 요소의 ID입니다. 여기서는 'locationDisplay'입니다.
     text: 요소에 설정할 텍스트 콘텐츠입니다. 여기서는 region.name입니다.

3. const modalInstance = bootstrap.Modal.getInstance(locationModal);
   - 설명: bootstrap.Modal.getInstance는 지정된 모달 요소에 대한 Bootstrap 모달 인스턴스를 반환합니다. 이 인스턴스를 사용하면 해당 모달에 대해 프로그램적으로 제어할 수 있습니다.
   - 사용법:
     const modalInstance = bootstrap.Modal.getInstance(element);
     element: 모달 요소입니다. 여기서는 locationModal입니다.
     결과: modalInstance는 모달에 대한 Bootstrap 인스턴스가 됩니다.

4. modalInstance.hide();
   - 설명: hide 메서드는 Bootstrap 모달 인스턴스를 숨기기 위해 사용됩니다. 여기서는 modalInstance가 가리키는 모달을 닫습니다.
   - 사용법:
     modalInstance.hide();
     결과: 모달이 화면에서 사라집니다.
*/ -->
